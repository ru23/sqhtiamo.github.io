# 七牛视频直播学习笔记

## 一、《视频直播技术详解》系列之一：开篇

### 1. 流程

参考：
[《视频直播技术详解》系列之一：开篇](http://blog.qiniu.com/archives/6606)

原作者给的流程图：

![原作者给的流程图](http://blog.qiniu.com/wp-content/uploads/2016/08/11.png =x200)


#### 1.采集

- iOS 系统因为软硬件种类不多，硬件适配性较好，所以比较简单。
- Android 则不同，市面上硬件机型非常多，难以做到一个库适配所有硬件。
- PC 端的采集也跟各种摄像头驱动有关，推荐使用目前市面上最好用的 PC 端开源免费软件 OBS。

#### 2.处理

- 视频处理如模糊效果、水印等也都是在这个环节做。
- iOS 端比较知名的是 GPUImage 这个库，提供了丰富端预处理效果，还可以基于这个库自己写算法实现更丰富端效果。
- Android 也有 GPUImage 这个库的移植，叫做 android-gpuimage。同时，Google 官方开源了一个伟大的库，覆盖了 Android 上面很多多媒体和图形图像相关的处理。(啥库？没说啊。。。)

#### 3.编码
- 处理硬件兼容性问题。（硬件兼容性？不懂。。。）
- 在高 fps、低 bitrate 和音质画质之间找到平衡。
	- iOS 端硬件兼容性较好，可以直接采用硬编。
	- Android 的硬编的支持则难得多，需要支持各种硬件机型，推荐使用软编。
	
#### 4.推流和传输

- 从主播端到服务端，从收流服务端到边缘节点，以及再从边缘节点到观众端。
- 推流端和分发端理论上需要支持的并发用户数应该都是亿级的，
	- 不过毕竟产生内容的推流端在少数对推流稳定性和速度的要求比播放端高很多
- 现在的CDN不靠谱 
	- 你能够借助CDN快速实现大规模的流分发
	- 但是稳定高速的推流上传可能还需要自己做很多工作
	- 七牛打造了一个直播专属的实时流网络
	
#### 5.转码

- 转码成不同格式支持不同协议如 RTMP、HLS 和 FLV，一路转多路流来适配各种不同的网络状况和不同分辨率的终端设备。
- 内容识别，如：鉴黄功能。

#### 6.解码和渲染

- iOS 端的播放兼容性较好，在延迟可接受的情况下使用 HLS 协议是最好的选择 + RTMP 和 HLS 的播放器 SDK。
	
- Android 的硬件解码和编码一样也存在兼容性问题，目前比较好的开源播放器是基于 ffplay 的 ijkplayer + Android SDK。

#### 7.直播场景化解决方案

- 社交直播下的聊天、点赞和弹幕的支持




[《视频直播技术详解》系列之一：开篇](http://blog.qiniu.com/archives/6606)

[《视频直播技术详解》系列之一：开篇](http://blog.qiniu.com/archives/6606)

[《视频直播技术详解》系列之一：开篇](http://blog.qiniu.com/archives/6606)

[《视频直播技术详解》系列之一：开篇](http://blog.qiniu.com/archives/6606)

[《视频直播技术详解》系列之一：开篇](http://blog.qiniu.com/archives/6606)

[《视频直播技术详解》系列之一：开篇](http://blog.qiniu.com/archives/6606)